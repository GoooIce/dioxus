// Dioxus OpenHarmony Entry Ability
// This ability loads the Rust-built shared library via @ohos-rs/ability's RustAbility.

import { RustAbility } from '@ohos-rs/ability'
import Want from '@ohos.app.ability.Want'
import { AbilityConstant } from '@kit.AbilityKit';
import window from '@ohos.window';

export default class EntryAbility extends RustAbility {
  // The Rust library name (without 'lib' prefix and '.so' suffix)
  public moduleName: string = "{{lib_name}}"
  public defaultPage: boolean = true;
  // Use 'webview' mode for Dioxus WebView-based rendering
  public mode: 'xcomponent' | 'webview' = 'webview'

  async onCreate(want: Want, launchParam: AbilityConstant.LaunchParam): Promise<void> {
    super.onCreate(want, launchParam);
  }

  async onWindowStageCreate(windowStage: window.WindowStage): Promise<void> {
    const window = windowStage.getMainWindowSync();
    await window.setWindowLayoutFullScreen(false);
    super.onWindowStageCreate(windowStage);
  }
}
